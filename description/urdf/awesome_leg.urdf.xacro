<?xml version="1.0" encoding="utf-8" ?>

<robot name="awesome_leg" xmlns:xacro="http://www.ros.org/wiki/xacro">

    <xacro:include filename="$(find awesome_leg)/description/urdf/awesome_leg.gazebo.xacro" />

    <xacro:macro name="awesome_leg" params="id base_link" >

        <xacro:unless value="${ base_link=='None' or base_link=='none'}">
            <!-- only add joint to base if argument is non-empty -->
            <joint name="hip_pitch${id}" type="revolute">
                <parent link="${base_link}" />
                <child link="femur${id}" />
                <axis xyz="0 1 0"/>
                <origin xyz="0 ${214.6 * mmTom} 0" />
                <limit effort="112" lower="-2.4" upper="2.4" velocity="20.0"/>
            </joint>

        </xacro:unless>

        <link name="femur${id}">
            <inertial>
                <origin xyz="0.0 0.0 0.0"/>
                <mass value="3.3712777"/>
                <inertia ixx="${4.6647423e+04 * kgmm2_2_kgm2}" iyy="${4.3720135e+04 * kgmm2_2_kgm2}" izz="${7.5794813e+04 * kgmm2_2_kgm2}"
                    ixy="${-1.2697640e+01 * kgmm2_2_kgm2}" ixz="${-3.2745810e+01 * kgmm2_2_kgm2}" iyz="${-6.3299091e+04 * kgmm2_2_kgm2}" />
            </inertial>
            <visual>
                <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
                <geometry>
                    <mesh filename="package://awesome_leg/description/new_meshes/visual/femur.stl" scale="${dmTom} ${dmTom} ${dmTom}"/>
                </geometry>
                <material name="darkblue"/>
            </visual>
            <collision>
                <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
                <geometry>
                    <mesh filename="package://awesome_leg/description/new_meshes/collision/femur.stl" scale="${dmTom} ${dmTom} ${dmTom}"/>
                </geometry>
            </collision>
        </link>

        <joint name="knee_pitch${id}" type="revolute">
            <parent link="femur${id}"/>
            <child link="shin${id}"/>
            <origin rpy="0.0 0.0 0.0" xyz="0.0 ${-118.2 * mmTom} ${-300.0 * mmTom}"/>
            <axis xyz="0 1 0"/>
            <limit effort="112" lower="-2.4" upper="2.4" velocity="20.0"/>
        </joint>

        <link name="shin${id}">
            <inertial>
                <origin xyz="0.0 0.0 0.0"/>
                <mass value="1.3106594"/>
                <inertia ixx="${4.0133965e+04 * kgmm2_2_kgm2}" iyy="${4.0269285e+04 * kgmm2_2_kgm2}" izz="${1.5274496e+03 * kgmm2_2_kgm2}"
                    ixy="${4.6219082e-02 * kgmm2_2_kgm2}" ixz="${-3.0432320e-01 * kgmm2_2_kgm2}" iyz="${1.3816329e+03 * kgmm2_2_kgm2}" />
            </inertial>
            <visual>
                <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
                <geometry>
                    <mesh filename="package://awesome_leg/description/new_meshes/visual/shin.stl" scale="${dmTom} ${dmTom} ${dmTom}"/>
                </geometry>
                <material name="grey"/>
            </visual>
            <collision>
                <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
                <geometry>
                    <mesh filename="package://awesome_leg/description/new_meshes/collision/shin.stl" scale="${dmTom} ${dmTom} ${dmTom}"/>
                </geometry>
            </collision>
        </link>

        <joint name="tip_joint${id}" type="fixed">
            <parent link="shin${id}"/>
            <child link="tip${id}"/>
            <origin xyz="0.0 ${23.3000 * mmTom} ${-451 * mmTom}"/>
        </joint>

        <link name="tip${id}"/> 

        <!-- <transmission name="hip_pitch${id}">
            <type>transmission_interface/SimpleTransmission</type>
            <joint name="hip_pitch_1">
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
            </joint>
            <actuator name="hip_motor">
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
                <mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission>
        <transmission name="knee_trans">
            <type>transmission_interface/SimpleTransmission</type>
            <joint name="knee_pitch_1">
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
            </joint>
            <actuator name="knee_motor">
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
                <mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission> -->
        
    </xacro:macro>

</robot>