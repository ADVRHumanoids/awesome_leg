<?xml version="1.0" encoding="utf-8" ?>

<robot name="awesome_leg_complete" xmlns:xacro="http://www.ros.org/wiki/xacro">

    <!-- ################### MATERIAL DEFINITIONS ################### -->
ÃŒ
    <material name="black">
        <color rgba="0.4 0.4 0.4 1"/>
    </material>
    <material name="dark">
        <color rgba="0.1 0.1 0.1 1"/>
    </material>
     <material name="dark_grey">
        <color rgba="0.6627 0.6627 0.6627 1"/>
    </material>
    <material name="test_rig_material">
        <color rgba="0.647 0.655 0.678 1.0" />
    </material>

    <!-- ################### LINKS ################### -->
    <link name="world"/>

   <link name="test_rig"> <!-- test rig link; defined here to be able to cope with passive joints -->
      <visual>
          <origin rpy="0 0 0" xyz="-0.12 0 0" />
          <geometry>
              <box size="0.1 0.1 1" />
          </geometry>
          <material name="test_rig_material" />
      </visual>
      <collision>
          <origin rpy="0 0 0" xyz="-0.12 0 0" />
          <geometry>
              <box size="0.1 0.1 1" />
          </geometry>
      </collision>
      
      <inertial>
          <mass value="0.1" />
          <inertia ixx="0.03" iyy="0.03" izz="0.03" ixy="0.0" ixz="0.0" iyz="0.0" />
      </inertial>

    </link>  

    <link name="pelvis">
        <inertial>
        <mass value="10.0"/> <!-- considering also the mass contribution of the robot torso -->
        <inertia ixx="0.00208333333333" ixy="0.0" ixz="0.0" iyy="0.00208333333333" iyz="0.0" izz="0.0025"/>
        </inertial>
        <visual>
        <geometry>
            <cylinder length="0.1" radius="0.1"/>
        </geometry>
        </visual>
        <visual>
        <geometry>
            <cylinder length="0.1" radius="0.1"/>
        </geometry>
        </visual>
    </link>

    <link name="hip1_1">
        <inertial>
        <origin xyz="0.010214199 0.0 0.038090987"/>
        <mass value="1.9194403"/>
        <!-- org: 2 -->
        <inertia ixx="0.0047439572" ixy="-0.0" ixz="-0.0003784138" iyy="0.0040551878" iyz="-0.0" izz="0.0034146219"/>
        <!-- <inertia ixx="0.01" ixy="0.01" ixz="0.01" iyy="0.01" iyz="0.01" izz="0.01"/> -->
        </inertial>
        <visual>
        <origin rpy="0.0 0.0 2.03221245002" xyz="0.0 0.0 0.0"/>
        <geometry>
            <mesh filename="package://awesome_leg_pholus/description/meshes/visual/hip-yaw.stl" scale="0.001 0.001 0.001"/>
        </geometry>
        <material name="dark_grey"/>
        </visual>
        <collision>
        <origin rpy="0.0 0.0 2.03221245002" xyz="0.0 0.0 0.0"/>
        <geometry>
            <mesh filename="package://awesome_leg_pholus/description/meshes/collision/hip-yaw.stl" scale="0.001 0.001 0.001"/>
        </geometry>
        </collision>
    </link>

    <link name="hip2_1">
        <inertial>
        <origin xyz="2.57966e-05 0.1810266 0.085669756"/>
        <mass value="2.7264471"/>
        <!-- org: 4.5 -->
        <inertia ixx="0.04851869" ixy="-4.11894e-05" ixz="-1.68778e-05" iyy="0.004242055" iyz="0.0032243188" izz="0.04825583"/>
        <!-- <inertia ixx="0.01" ixy="0.01" ixz="0.01" iyy="0.01" iyz="0.01" izz="0.01"/> -->
        </inertial>
        <visual>
        <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
        <geometry>
            <mesh filename="package://awesome_leg_pholus/description/meshes/visual/hip-pitch.stl" scale="0.001 0.001 0.001"/>
        </geometry>
        </visual>
        <collision>
        <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
        <geometry>
            <mesh filename="package://awesome_leg_pholus/description/meshes/collision/hip-pitch.stl" scale="0.001 0.001 0.001"/>
        </geometry>
        </collision>
    </link>

    <link name="knee_1">
        <inertial>
        <mass value="1.1927236"/>
        <origin rpy="0.0 0.0 0.0" xyz="0.19572282 -0.014549221 -0.020785942"/>
        <!--origin xyz="${1.4549221e+01*mmTom} ${-2.0785942e+01*mmTom} ${-1.9572282e+02*mmTom}" rpy="0.0 0.0 0.0"/-->
        <!--inertia ixx="${3.5313402e+04*mm2Tom2}"  ixy="${0.0*mm2Tom2}"  ixz="${1.1029574e-01*mm2Tom2}" iyy="${3.5530025e+04*mm2Tom2}" iyz="${-6.0307457e+02*mm2Tom2}" izz="${1.3302597e+03*mm2Tom2}" /-->
        <inertia ixx="0.0013302597" ixy="0.00060307457" ixz="0.0" iyy="0.035313402" iyz="-1.1029574e-07" izz="0.035530025"/>
        </inertial>
        <visual>
        <origin rpy="1.57079632679 0 -1.57079632679" xyz="0 0 0"/>
        <material name="black"/>
        <geometry name="1_stick_visual">
            <mesh filename="package://awesome_leg_pholus/description/meshes/visual/front_right_stick.stl" scale="0.001 0.001 0.001"/>
        </geometry>
        </visual>
        <collision>
        <origin rpy="1.57079632679 0 -1.57079632679" xyz="0 0 0"/>
        <geometry name="1_stick_collision">
            <mesh filename="package://awesome_leg_pholus/description/meshes/collision/front_right_stick.stl" scale="0.001 0.001 0.001"/>
        </geometry>
        </collision>
    </link>
    
    <link name="tip"/> <!-- just for reference-->

    <!-- ################### JOINTS ################### -->
    
    <joint name="world_to_test_rig" type="fixed">
    <parent link="world"/>
    <child link="test_rig"/>
    </joint>

    <joint name="passive_joint" type="prismatic">
      <parent link="test_rig" />
      <child link="pelvis" />
      <origin xyz="0 0 0.1" />
      <axis xyz="0 0 1" />
      <dynamics damping="0.0" friction="0.0" />
      <limit lower="-0.5" upper="0.5" effort="80" velocity="15.0" />
  </joint>

    <joint name="hip_yaw_1" type="fixed">
        <parent link="pelvis"/>
        <child link="hip1_1"/>
        <origin rpy="3.14159265359 0.0 0.0" xyz="0.0 -0.0 -0.0566"/>
    </joint>

    <joint name="hip_pitch_1" type="revolute">
        <parent link="hip1_1"/>
        <child link="hip2_1"/>
        <origin rpy="1.57079632679 0.0 1.5707963268" xyz="0.0 0.0 0.0625"/>
        <axis xyz="0 0 1"/>
        <limit effort="100" lower="-2.0226" upper="2.02748" velocity="35.0"/>
    </joint>

    <joint name="knee_pitch_1" type="revolute">
        <parent link="hip2_1"/>
        <child link="knee_1"/>
        <origin rpy="3.14159265359 0.0 1.57079632679" xyz="0.0 0.3 -0.0036"/>
        <axis xyz="0 0 1"/>
        <limit effort="100" lower="-2.4056" upper="2.3994" velocity="35.0"/>
        <!-- 200 Nm, 1 rad/s-->
    </joint>

    <joint name="tip_joint" type="fixed">
        <parent link="knee_1"/>
        <child link="tip"/>
        <origin xyz="0.45 0.0 -0.02"/>
    </joint>

</robot>